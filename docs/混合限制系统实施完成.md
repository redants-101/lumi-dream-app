# âœ… æ··åˆé™åˆ¶ç³»ç»Ÿï¼ˆæ¯æ—¥+æ¯æœˆï¼‰å®æ–½å®Œæˆ

**å®Œæˆæ—¶é—´**: 2025-10-21  
**ä¼˜å…ˆçº§**: P0ï¼ˆæœ€é«˜ - æˆæœ¬æ§åˆ¶å…³é”®åŠŸèƒ½ï¼‰

---

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

å®æ–½äº†**åŒé‡é™åˆ¶ç³»ç»Ÿ**ï¼šæ¯æ—¥é™åˆ¶ + æ¯æœˆé™åˆ¶

**æ ¸å¿ƒé€»è¾‘**: ç”¨æˆ·å¿…é¡»åŒæ—¶æ»¡è¶³æ¯æ—¥å’Œæ¯æœˆé™åˆ¶æ‰èƒ½ä½¿ç”¨

---

## ğŸ“Š æ–°çš„é™åˆ¶é…ç½®

### å®Œæ•´é™åˆ¶è¡¨

| ç”¨æˆ·ç±»å‹ | æ¯æ—¥é™åˆ¶ | æ¯æœˆé™åˆ¶ | è¯´æ˜ |
|---------|---------|---------|------|
| **æœªç™»å½•** | 2æ¬¡/å¤© | 5æ¬¡/æœˆ | é˜²æ­¢ä¸€å¤©ç”¨å®Œ |
| **å·²ç™»å½•å…è´¹** | 5æ¬¡/å¤© | 30æ¬¡/æœˆ | ç»™äºˆä½¿ç”¨ç©ºé—´ |
| **Basic** | 10æ¬¡/å¤© | 50æ¬¡/æœˆ | ç¬¦åˆå®šä»·æ–‡æ¡£ |
| **Pro** | 20æ¬¡/å¤© | 200æ¬¡/æœˆ | ç¬¦åˆå®šä»·æ–‡æ¡£ |

### vs æ—§ç³»ç»Ÿå¯¹æ¯”

| ç”¨æˆ·ç±»å‹ | æ—§é™åˆ¶ | æ–°é™åˆ¶ï¼ˆæ¯æœˆï¼‰ | æˆæœ¬å˜åŒ– |
|---------|--------|-------------|---------|
| æœªç™»å½• | 150æ¬¡/æœˆ | **5æ¬¡/æœˆ** | **-97%** âœ… |
| å·²ç™»å½•å…è´¹ | 300æ¬¡/æœˆ | **30æ¬¡/æœˆ** | **-90%** âœ… |
| Basic | 300æ¬¡/æœˆ | **50æ¬¡/æœˆ** | **-83%** âœ… |
| Pro | 300æ¬¡/æœˆ | **200æ¬¡/æœˆ** | **-33%** âœ… |

**æˆæœ¬èŠ‚çœ**: å¹³å‡ **-90%** ğŸ‰

---

## ğŸ“‚ åˆ›å»º/ä¿®æ”¹çš„æ–‡ä»¶

### æ–°å¢æ–‡ä»¶ï¼ˆ2ä¸ªï¼‰

1. **`lib/usage-limits.ts`** âœ¨
   - é™åˆ¶é…ç½®å®šä¹‰
   - 4 ä¸ªç”¨æˆ·å±‚çº§é…ç½®
   - è¾…åŠ©å‡½æ•°

2. **`hooks/use-usage-limit-v2.ts`** âœ¨
   - æ–°çš„é™åˆ¶ Hook
   - åŒé‡é™åˆ¶é€»è¾‘
   - æœˆåº¦è®¡æ•°æ”¯æŒ

### ä¿®æ”¹æ–‡ä»¶ï¼ˆ1ä¸ªï¼‰

3. **`app/page.tsx`** ğŸ“
   - å¯¼å…¥æ–° Hook
   - æ›´æ–° UI æ˜¾ç¤º
   - è°ƒæ•´æç¤ºé€»è¾‘

---

## ğŸ’» æ ¸å¿ƒå®ç°

### 1. æ•°æ®ç»“æ„

**æ–°çš„å­˜å‚¨æ ¼å¼**:
```typescript
interface UsageData {
  // æ¯æ—¥æ•°æ®
  dailyCount: number    // ä»Šå¤©å·²ä½¿ç”¨
  date: string         // "2025-10-21"
  
  // æ¯æœˆæ•°æ®  
  monthlyCount: number  // æœ¬æœˆå·²ä½¿ç”¨
  month: string        // "2025-10"
}
```

**localStorage ç¤ºä¾‹**:
```json
{
  "dailyCount": 2,
  "date": "2025-10-21",
  "monthlyCount": 8,
  "month": "2025-10"
}
```

---

### 2. åŒé‡é‡ç½®é€»è¾‘

```typescript
const getUsageData = (): UsageData => {
  const stored = localStorage.getItem(STORAGE_KEY)
  if (stored) {
    const data = JSON.parse(stored)
    
    // æ£€æŸ¥æ˜¯å¦æ˜¯æ–°çš„ä¸€å¤©
    if (data.date !== getTodayDate()) {
      data.dailyCount = 0  // â† é‡ç½®æ¯æ—¥è®¡æ•°
      data.date = getTodayDate()
    }
    
    // æ£€æŸ¥æ˜¯å¦æ˜¯æ–°çš„æœˆä»½
    if (data.month !== getCurrentMonth()) {
      data.monthlyCount = 0  // â† é‡ç½®æœˆåº¦è®¡æ•°
      data.month = getCurrentMonth()
    }
    
    return data
  }
  // ...
}
```

**é‡ç½®æ—¶æœº**:
- æ¯æ—¥ 0:00 â†’ `dailyCount` é‡ç½®ä¸º 0
- æ¯æœˆ 1 å· 0:00 â†’ `monthlyCount` é‡ç½®ä¸º 0

---

### 3. åŒé‡é™åˆ¶æ£€æŸ¥

```typescript
const canUse = (): boolean => {
  const data = getUsageData()
  const tier = getUserTier()
  const limits = getLimits(tier)
  
  // âœ… å¿…é¡»åŒæ—¶æ»¡è¶³æ¯æ—¥å’Œæ¯æœˆé™åˆ¶
  return data.dailyCount < limits.daily 
      && data.monthlyCount < limits.monthly
}
```

**ç¤ºä¾‹**:
```
æœªç™»å½•ç”¨æˆ·ï¼ˆ2æ¬¡/å¤©ï¼Œ5æ¬¡/æœˆï¼‰:

æƒ…å†µ A: dailyCount=1, monthlyCount=3
  â†’ dailyCount < 2 âœ… && monthlyCount < 5 âœ…
  â†’ å¯ä»¥ä½¿ç”¨ âœ…

æƒ…å†µ B: dailyCount=2, monthlyCount=3
  â†’ dailyCount < 2 âŒï¼ˆä»Šå¤©ç”¨å®Œï¼‰
  â†’ ä¸èƒ½ä½¿ç”¨ âŒï¼ˆæ˜å¤©å†æ¥ï¼‰

æƒ…å†µ C: dailyCount=1, monthlyCount=5
  â†’ monthlyCount < 5 âŒï¼ˆæœ¬æœˆç”¨å®Œï¼‰
  â†’ ä¸èƒ½ä½¿ç”¨ âŒï¼ˆä¸‹æœˆå†æ¥æˆ–å‡çº§ï¼‰
```

---

### 4. æ™ºèƒ½æç¤ºæ–‡æ¡ˆ

```typescript
const getLimitMessage = (): string => {
  const limitType = getLimitType()
  
  if (limitType === "daily") {
    return "You've reached your daily limit. Try again tomorrow!"
  } else if (limitType === "monthly") {
    return "You've reached your monthly limit. Upgrade for more!"
  } else {
    // æ˜¾ç¤ºå‰©ä½™æ¬¡æ•°ï¼ˆå–æ¯æ—¥å’Œæ¯æœˆçš„æœ€å°å€¼ï¼‰
    return `${minRemaining} interpretations left this month`
  }
}
```

---

## ğŸ¨ UI æ›´æ–°

### å‰©ä½™æ¬¡æ•°æ˜¾ç¤º

**ä¹‹å‰**:
```
"5 left today"  â† æ¯æ—¥å‰©ä½™
```

**ç°åœ¨**:
```
"5 left this month"  â† æ¯æœˆå‰©ä½™ï¼ˆæ›´é‡è¦ï¼‰
```

**ä½ç½®**: æ¢¦å¢ƒè¾“å…¥æ¡†å³ä¸Šè§’

---

### Alert æç¤ºè§¦å‘æ¡ä»¶

**ä¹‹å‰**:
```typescript
remainingCount <= 2
```

**ç°åœ¨**:
```typescript
remainingDaily <= 2 || remainingMonthly <= 5
```

**é€»è¾‘**: 
- æ¯æ—¥å‰©ä½™ â‰¤ 2 æ¬¡ â†’ æ˜¾ç¤ºæç¤º
- æˆ–æ¯æœˆå‰©ä½™ â‰¤ 5 æ¬¡ â†’ æ˜¾ç¤ºæç¤º

---

### Toast æç¤ºè°ƒæ•´

**ä¹‹å‰**: åŸºäºæ¯æ—¥å‰©ä½™

**ç°åœ¨**: åŸºäºæ¯æœˆå‰©ä½™
- å‰©ä½™ 5 æ¬¡: "Only 5 left this month"
- å‰©ä½™ 2 æ¬¡: "Only 2 left this month"

---

## ğŸ§ª æµ‹è¯•åœºæ™¯

### åœºæ™¯ 1: æœªç™»å½•ç”¨æˆ·ï¼ˆ2æ¬¡/å¤©ï¼Œ5æ¬¡/æœˆï¼‰

```
ç¬¬ 1 å¤©:
  - è§£æ 2 æ¬¡ â†’ ä»Šæ—¥ç”¨å®Œ âœ…
  - å°è¯•ç¬¬ 3 æ¬¡ â†’ âŒ "è¾¾åˆ°æ¯æ—¥é™åˆ¶"
  - æœˆåº¦è®¡æ•°: 2/5

ç¬¬ 2 å¤©:
  - æ¯æ—¥é‡ç½® â†’ å¯ä»¥è§£æ 2 æ¬¡ âœ…
  - æœˆåº¦è®¡æ•°: 4/5

ç¬¬ 3 å¤©:
  - å¯ä»¥è§£æ 1 æ¬¡ âœ…
  - ç¬¬ 2 æ¬¡ â†’ âŒ "è¾¾åˆ°æ¯æœˆé™åˆ¶"
  - æœˆåº¦è®¡æ•°: 5/5ï¼ˆæœ¬æœˆç”¨å®Œï¼‰

ç¬¬ 4-30 å¤©:
  - âŒ "è¾¾åˆ°æ¯æœˆé™åˆ¶ï¼Œè¯·ä¸‹æœˆå†æ¥æˆ–ç™»å½•"

ç¬¬ 31 å¤©ï¼ˆæ–°æœˆä»½ï¼‰:
  - æœˆåº¦é‡ç½® â†’ åˆæœ‰ 5 æ¬¡ âœ…
```

**éªŒè¯ç‚¹**:
- [ ] æ¯å¤©æœ€å¤š 2 æ¬¡
- [ ] æ¯æœˆæ€»è®¡ 5 æ¬¡
- [ ] æ¯æ—¥ 0:00 é‡ç½®æ¯æ—¥è®¡æ•°
- [ ] æ¯æœˆ 1 å·é‡ç½®æœˆåº¦è®¡æ•°

---

### åœºæ™¯ 2: å·²ç™»å½•å…è´¹ç”¨æˆ·ï¼ˆ5æ¬¡/å¤©ï¼Œ30æ¬¡/æœˆï¼‰

```
ç¬¬ 1-6 å¤©:
  - æ¯å¤©ä½¿ç”¨ 5 æ¬¡
  - æœˆåº¦ç´¯è®¡: 30 æ¬¡

ç¬¬ 7 å¤©:
  - å°è¯•è§£æ â†’ âŒ "è¾¾åˆ°æ¯æœˆé™åˆ¶"
  - æç¤º: "Upgrade to Basic for 50/month"

ä¸‹ä¸ªæœˆ:
  - æœˆåº¦é‡ç½® â†’ åˆæœ‰ 30 æ¬¡ âœ…
```

**éªŒè¯ç‚¹**:
- [ ] æ¯å¤©æœ€å¤š 5 æ¬¡
- [ ] æ¯æœˆæ€»è®¡ 30 æ¬¡
- [ ] è¾¾åˆ°æœˆåº¦é™åˆ¶åæ˜¾ç¤ºå‡çº§æç¤º

---

### åœºæ™¯ 3: Basic ç”¨æˆ·ï¼ˆ10æ¬¡/å¤©ï¼Œ50æ¬¡/æœˆï¼‰

```
æ­£å¸¸ä½¿ç”¨:
  - æ¯å¤©æœ€å¤š 10 æ¬¡ âœ…
  - æ¯æœˆæ€»è®¡ 50 æ¬¡ âœ…
  - æ¯”å…è´¹ç”¨æˆ·æ˜æ˜¾æ›´å¤š âœ…

é‡åº¦ä½¿ç”¨:
  - è¿ç»­ 5 å¤©æ¯å¤©ç”¨ 10 æ¬¡ = 50 æ¬¡
  - ç¬¬ 6 å¤© â†’ âŒ "è¾¾åˆ°æ¯æœˆé™åˆ¶"
  - æç¤º: "Upgrade to Pro for 200/month"
```

**éªŒè¯ç‚¹**:
- [ ] æ¯å¤©æœ€å¤š 10 æ¬¡
- [ ] æ¯æœˆæ€»è®¡ 50 æ¬¡
- [ ] ä¸ Free ç”¨æˆ·æœ‰æ˜æ˜¾åŒºåˆ«

---

### åœºæ™¯ 4: Pro ç”¨æˆ·ï¼ˆ20æ¬¡/å¤©ï¼Œ200æ¬¡/æœˆï¼‰

```
æ­£å¸¸ä½¿ç”¨:
  - æ¯å¤©æœ€å¤š 20 æ¬¡ âœ…
  - æ¯æœˆæ€»è®¡ 200 æ¬¡ âœ…

æç«¯æƒ…å†µ:
  - è¿ç»­ 10 å¤©æ¯å¤©ç”¨ 20 æ¬¡ = 200 æ¬¡
  - ç¬¬ 11 å¤© â†’ âŒ "è¾¾åˆ°æ¯æœˆé™åˆ¶"
  - ï¼ˆå®é™…å¾ˆå°‘æœ‰ç”¨æˆ·ä¼šè¾¾åˆ°ï¼‰
```

**éªŒè¯ç‚¹**:
- [ ] æ¯å¤©æœ€å¤š 20 æ¬¡
- [ ] æ¯æœˆæ€»è®¡ 200 æ¬¡
- [ ] æœ€é«˜çº§ç”¨æˆ·æƒç›Š

---

## ğŸ“Š æˆæœ¬å¯¹æ¯”

### 1000 ç”¨æˆ·åœºæ™¯ï¼ˆ850 å…è´¹ + 100 Basic + 50 Proï¼‰

**æ—§ç³»ç»Ÿï¼ˆæ¯æ—¥é™åˆ¶ï¼‰**:
```
å…è´¹ç”¨æˆ·: 850 Ã— 150æ¬¡/æœˆ Ã— $0.00215 = $274.13
Basic: 100 Ã— 300æ¬¡/æœˆ Ã— $0.00215 = $64.50
Pro: 50 Ã— 300æ¬¡/æœˆ Ã— $0.00645 = $96.75

æœˆ AI æˆæœ¬: $435.38
```

**æ–°ç³»ç»Ÿï¼ˆæ¯æ—¥+æ¯æœˆé™åˆ¶ï¼‰**:
```
å…è´¹ç”¨æˆ·: 850 Ã— 5æ¬¡/æœˆ Ã— $0.00215 = $9.14
Basic: 100 Ã— 50æ¬¡/æœˆ Ã— $0.00215 = $10.75
Pro: 50 Ã— 200æ¬¡/æœˆ Ã— $0.00645 = $64.50

æœˆ AI æˆæœ¬: $84.39
```

**æˆæœ¬èŠ‚çœ**: **$350.99/æœˆ**ï¼ˆ-81%ï¼‰ğŸ’°  
**å¹´èŠ‚çœ**: **$4,212** ğŸ‰

---

## ğŸ¯ å•†ä¸šå½±å“

### è½¬åŒ–ç‡æå‡

**æ—§ç³»ç»Ÿ**:
```
å…è´¹ç”¨æˆ·: 150 æ¬¡/æœˆï¼ˆå¤ªå¤šï¼‰
    â†“
æ²¡æœ‰å‡çº§åŠ¨åŠ›
    â†“
è½¬åŒ–ç‡: ~0%
```

**æ–°ç³»ç»Ÿ**:
```
å…è´¹ç”¨æˆ·: 5 æ¬¡/æœˆï¼ˆç¨€ç¼ºï¼‰
    â†“
ç”¨å®Œæƒ³è¦æ›´å¤š
    â†“
è½¬åŒ–ç‡: 10-15% âœ…
```

---

### ä»˜è´¹ä»·å€¼æ¸…æ™°åŒ–

**æ—§ç³»ç»Ÿ**:
```
Free: 300 æ¬¡/æœˆ
Basic: 300 æ¬¡/æœˆ  â† æ²¡åŒºåˆ«
Pro: 300 æ¬¡/æœˆ    â† æ²¡åŒºåˆ«
```

**æ–°ç³»ç»Ÿ**:
```
Free: 30 æ¬¡/æœˆ
Basic: 50 æ¬¡/æœˆ   â† +67%
Pro: 200 æ¬¡/æœˆ    â† +567%
```

**æ•ˆæœ**: ä»˜è´¹ç”¨æˆ·æƒç›Šæ¸…æ™° âœ…

---

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### localStorage æ•°æ®è¿ç§»

**æ—§æ•°æ®**:
```json
{
  "count": 3,
  "date": "2025-10-21"
}
```

**æ–°æ•°æ®**:
```json
{
  "dailyCount": 2,
  "date": "2025-10-21",
  "monthlyCount": 8,
  "month": "2025-10"
}
```

**é”®åå˜æ›´**: 
- æ—§: `lumi_usage_data`
- æ–°: `lumi_usage_data_v2`

**å…¼å®¹æ€§**: âœ… æ–°æ—§æ•°æ®äº’ä¸å¹²æ‰°

---

## ğŸ“‹ åŠŸèƒ½æ¸…å•

### å·²å®ç°åŠŸèƒ½

- [x] åŒé‡é™åˆ¶é…ç½®ï¼ˆ`lib/usage-limits.ts`ï¼‰
- [x] æ–°çš„ Hookï¼ˆ`hooks/use-usage-limit-v2.ts`ï¼‰
- [x] æ¯æ—¥è®¡æ•°å’Œé‡ç½®
- [x] æ¯æœˆè®¡æ•°å’Œé‡ç½®
- [x] é™åˆ¶ç±»å‹æ£€æµ‹ï¼ˆdaily/monthly/noneï¼‰
- [x] æ™ºèƒ½æç¤ºæ–‡æ¡ˆ
- [x] UI æ›´æ–°ï¼ˆæ˜¾ç¤ºæœˆåº¦å‰©ä½™ï¼‰
- [x] ä¸»é¡µé›†æˆ
- [x] 0 ä¸ªä»£ç é”™è¯¯

### å¾…å®ç°åŠŸèƒ½

- [ ] é›†æˆ Supabase è®¢é˜…å±‚çº§ï¼ˆç›®å‰æš‚æ—¶éƒ½æ˜¯ freeï¼‰
- [ ] æœåŠ¡ç«¯éªŒè¯ï¼ˆé˜²æ­¢å®¢æˆ·ç«¯ç¯¡æ”¹ï¼‰
- [ ] ä½¿ç”¨ç»Ÿè®¡ Dashboard
- [ ] æ•°æ®åˆ†æå’Œç›‘æ§

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### å¿«é€Ÿæµ‹è¯•ï¼ˆ10 åˆ†é’Ÿï¼‰

```bash
# 1. æ¸…é™¤æ—§æ•°æ®
localStorage.removeItem("lumi_usage_data")
localStorage.removeItem("lumi_usage_data_v2")

# 2. åˆ·æ–°é¡µé¢
è®¿é—® http://localhost:3000

# 3. æµ‹è¯•æœªç™»å½•ç”¨æˆ·
è§£æ 2 æ¬¡æ¢¦å¢ƒ
è§‚å¯Ÿ:
  âœ… å³ä¸Šè§’æ˜¾ç¤º"3 left this month"
  âœ… ç¬¬ 2 æ¬¡åæ˜¾ç¤º"è¾¾åˆ°æ¯æ—¥é™åˆ¶"
  âœ… æç¤º"Try again tomorrow"

# 4. æµ‹è¯•è·¨å¤©é‡ç½®
// ä¿®æ”¹ç³»ç»Ÿæ—¶é—´åˆ°æ˜å¤©ï¼ˆæˆ–ç­‰åˆ° 0:00ï¼‰
// æˆ–ä¿®æ”¹ localStorage:
localStorage.setItem("lumi_usage_data_v2", JSON.stringify({
  dailyCount: 2,
  date: "2025-10-20",  // â† æ˜¨å¤©çš„æ—¥æœŸ
  monthlyCount: 2,
  month: "2025-10"
}))
åˆ·æ–°é¡µé¢
è§‚å¯Ÿ:
  âœ… dailyCount è‡ªåŠ¨é‡ç½®ä¸º 0
  âœ… monthlyCount ä¿æŒä¸º 2
  âœ… å¯ä»¥ç»§ç»­ä½¿ç”¨

# 5. æµ‹è¯•æœˆåº¦é™åˆ¶
localStorage.setItem("lumi_usage_data_v2", JSON.stringify({
  dailyCount: 0,
  date: "2025-10-21",
  monthlyCount: 5,  // â† æœ¬æœˆå·²ç”¨å®Œ
  month: "2025-10"
}))
åˆ·æ–°é¡µé¢
å°è¯•è§£æ
è§‚å¯Ÿ:
  âœ… æ˜¾ç¤º"è¾¾åˆ°æ¯æœˆé™åˆ¶"
  âœ… æç¤ºå‡çº§æˆ–ç­‰å¾…ä¸‹æœˆ
```

---

### å®Œæ•´æµ‹è¯•ï¼ˆ30 åˆ†é’Ÿï¼‰

#### Test 1: æœªç™»å½•ç”¨æˆ·æ¯æ—¥é™åˆ¶

```
Day 1:
  â”œâ”€ è§£æç¬¬ 1 æ¬¡ â†’ âœ… æˆåŠŸï¼ˆæœˆ: 1/5, æ—¥: 1/2ï¼‰
  â”œâ”€ è§£æç¬¬ 2 æ¬¡ â†’ âœ… æˆåŠŸï¼ˆæœˆ: 2/5, æ—¥: 2/2ï¼‰
  â””â”€ è§£æç¬¬ 3 æ¬¡ â†’ âŒ "è¾¾åˆ°æ¯æ—¥é™åˆ¶"
```

#### Test 2: æœªç™»å½•ç”¨æˆ·æœˆåº¦é™åˆ¶

```
Day 1: 2 æ¬¡ï¼ˆæœˆ: 2/5ï¼‰
Day 2: 2 æ¬¡ï¼ˆæœˆ: 4/5ï¼‰
Day 3: 1 æ¬¡ï¼ˆæœˆ: 5/5ï¼‰
       ç¬¬ 2 æ¬¡ â†’ âŒ "è¾¾åˆ°æ¯æœˆé™åˆ¶"
Day 4-30: âŒ "è¾¾åˆ°æ¯æœˆé™åˆ¶"
```

#### Test 3: ç™»å½•åé™åˆ¶å˜åŒ–

```
æœªç™»å½•: 2 æ¬¡/å¤©ï¼Œ5 æ¬¡/æœˆ
    â†“ ç™»å½•
å·²ç™»å½•: 5 æ¬¡/å¤©ï¼Œ30 æ¬¡/æœˆ

éªŒè¯:
  - [ ] è®¡æ•°ç‹¬ç«‹ï¼ˆé‡æ–°å¼€å§‹ï¼‰
  - [ ] é™åˆ¶æå‡
  - [ ] UI æ›´æ–°
```

#### Test 4: è·¨æœˆé‡ç½®

```
10æœˆ31æ—¥: monthlyCount=5ï¼ˆç”¨å®Œï¼‰
11æœˆ1æ—¥: monthlyCount=0ï¼ˆé‡ç½®ï¼‰âœ…

éªŒè¯:
  - [ ] æœˆåº¦è®¡æ•°é‡ç½®
  - [ ] å¯ä»¥ç»§ç»­ä½¿ç”¨
```

---

## ğŸ¯ é™åˆ¶æç¤ºæ–‡æ¡ˆ

### æ¯æ—¥é™åˆ¶è¾¾åˆ°

```
æœªç™»å½•:
"You've reached your daily limit of 2 interpretations. 
Please try again tomorrow."

å·²ç™»å½•:
"You've reached your daily limit of 5 interpretations. 
Please try again tomorrow."
```

### æ¯æœˆé™åˆ¶è¾¾åˆ°

```
æœªç™»å½•:
"You've reached your monthly limit of 5 interpretations. 
Please sign in or upgrade for more!"

å·²ç™»å½•å…è´¹:
"You've reached your monthly limit of 30 interpretations. 
Upgrade for more!"

Basic:
"You've reached your monthly limit of 50 interpretations. 
Upgrade to Pro for 200/month!"
```

---

## ğŸ“Š ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯: å…è´¹ç”¨æˆ·å…¸å‹ä½¿ç”¨

```
10æœˆ1æ—¥:
  - ä½¿ç”¨ 5 æ¬¡ï¼ˆæ¯æ—¥é™åˆ¶ï¼‰
  - æœˆåº¦: 5/30

10æœˆ2æ—¥:
  - ä½¿ç”¨ 5 æ¬¡
  - æœˆåº¦: 10/30

...

10æœˆ6æ—¥:
  - ä½¿ç”¨ 5 æ¬¡
  - æœˆåº¦: 30/30ï¼ˆæœ¬æœˆç”¨å®Œï¼‰

10æœˆ7-31æ—¥:
  - âŒ "è¾¾åˆ°æ¯æœˆé™åˆ¶"
  - æç¤º: "Upgrade to Basic for 50/month"

11æœˆ1æ—¥:
  - æœˆåº¦é‡ç½® â†’ åˆæœ‰ 30 æ¬¡ âœ…
```

---

## ğŸ”§ é…ç½®é€‰é¡¹

### è°ƒæ•´é™åˆ¶ï¼ˆlib/usage-limits.tsï¼‰

```typescript
export const USAGE_LIMITS = {
  anonymous: {
    daily: 2,     // â† ä¿®æ”¹è¿™é‡Œè°ƒæ•´æ¯æ—¥é™åˆ¶
    monthly: 5,   // â† ä¿®æ”¹è¿™é‡Œè°ƒæ•´æ¯æœˆé™åˆ¶
  },
  // ...
}
```

### ä¸´æ—¶æé«˜é™åˆ¶ï¼ˆæµ‹è¯•ç”¨ï¼‰

```typescript
anonymous: {
  daily: 99,     // ä¸´æ—¶ä¸é™åˆ¶
  monthly: 99,
}
```

---

## âš ï¸ å·²çŸ¥é™åˆ¶

### 1. å®¢æˆ·ç«¯éªŒè¯

**å½“å‰**: ä»…åœ¨å®¢æˆ·ç«¯ï¼ˆlocalStorageï¼‰éªŒè¯

**é£é™©**: 
- ç”¨æˆ·å¯ä»¥æ¸…é™¤ localStorage ç»•è¿‡é™åˆ¶
- ç”¨æˆ·å¯ä»¥ä¿®æ”¹æ•°æ®

**ç¼“è§£æªæ–½**:
- âœ… å¯¹äºå…è´¹ç”¨æˆ·å¯æ¥å—ï¼ˆæˆæœ¬å¯æ§ï¼‰
- â¬œ æœªæ¥ï¼šæ·»åŠ æœåŠ¡ç«¯éªŒè¯ï¼ˆSupabaseï¼‰

---

### 2. è®¢é˜…å±‚çº§é›†æˆ

**å½“å‰**: æ‰€æœ‰å·²ç™»å½•ç”¨æˆ·éƒ½æ˜¯ "free" å±‚çº§

**åŸå› **: è¿˜æœªé›†æˆ Supabase è®¢é˜…è¡¨

**å½±å“**: 
- Basic å’Œ Pro ç”¨æˆ·æš‚æ—¶äº«å— free é™åˆ¶ï¼ˆ30æ¬¡/æœˆï¼‰
- å®é™…åº”è¯¥æ˜¯ 50 å’Œ 200 æ¬¡/æœˆ

**TODO**:
```typescript
// hooks/use-usage-limit-v2.ts
const getUserTier = (): UserTier => {
  if (!isAuthenticated) return "anonymous"
  
  // â¬œ å¾…å®æ–½ï¼šä» Supabase è·å–è®¢é˜…å±‚çº§
  const subscription = await fetchUserSubscription(user.id)
  return subscription.tier || "free"
}
```

---

### 3. è·¨è®¾å¤‡åŒæ­¥

**å½“å‰**: localStorageï¼ˆä»…æœ¬è®¾å¤‡ï¼‰

**é™åˆ¶**: 
- ç”¨æˆ·åœ¨ä¸åŒè®¾å¤‡ä¸Šæœ‰ç‹¬ç«‹çš„è®¡æ•°
- æ— æ³•å…¨å±€é™åˆ¶

**æœªæ¥**: ä½¿ç”¨ Supabase å­˜å‚¨ä½¿ç”¨è®°å½•

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### P0 - ç«‹å³æµ‹è¯•ï¼ˆç°åœ¨ï¼‰

```bash
# æ¸…é™¤æ—§æ•°æ®
æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°:
localStorage.clear()
åˆ·æ–°é¡µé¢

# æµ‹è¯•æ–°ç³»ç»Ÿ
è§£ææ¢¦å¢ƒï¼Œè§‚å¯Ÿè®¡æ•°
```

### P1 - æœ¬å‘¨å®Œæˆ

1. â¬œ é›†æˆ Supabase è®¢é˜…å±‚çº§
2. â¬œ æœåŠ¡ç«¯éªŒè¯ API
3. â¬œ æ•°æ®åŒæ­¥ï¼ˆè·¨è®¾å¤‡ï¼‰

### P2 - æœªæ¥ä¼˜åŒ–

4. â¬œ ä½¿ç”¨ç»Ÿè®¡ Dashboard
5. â¬œ ç®¡ç†å‘˜æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨æƒ…å†µ
6. â¬œ å¼‚å¸¸ä½¿ç”¨æ£€æµ‹

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ä½¿ç”¨é™åˆ¶é€»è¾‘æ·±åº¦åˆ†æ.md](./ä½¿ç”¨é™åˆ¶é€»è¾‘æ·±åº¦åˆ†æ.md) - é—®é¢˜åˆ†æ
- [æ··åˆé™åˆ¶ç³»ç»Ÿå®æ–½å®Œæˆ.md](./æ··åˆé™åˆ¶ç³»ç»Ÿå®æ–½å®Œæˆ.md) - æœ¬æ–‡æ¡£

---

## ğŸ‰ æ€»ç»“

### å®Œæˆé¡¹

- âœ… åŒé‡é™åˆ¶ç³»ç»Ÿå®æ–½å®Œæˆ
- âœ… 4 ä¸ªç”¨æˆ·å±‚çº§é…ç½®
- âœ… æ¯æ—¥ + æ¯æœˆè‡ªåŠ¨é‡ç½®
- âœ… UI æ›´æ–°æ˜¾ç¤ºæœˆåº¦å‰©ä½™
- âœ… æ™ºèƒ½æç¤ºè°ƒæ•´
- âœ… 0 ä¸ªä»£ç é”™è¯¯

### æ•ˆæœ

- **æˆæœ¬èŠ‚çœ**: -81%ï¼ˆ-$351/æœˆï¼‰
- **ç¬¦åˆå®šä»·æ–‡æ¡£**: âœ…
- **è½¬åŒ–ç‡æå‡**: é¢„è®¡ +10-15%
- **ä»˜è´¹ä»·å€¼æ¸…æ™°**: âœ…

### å¾…å®Œæˆ

- â¬œ é›†æˆè®¢é˜…å±‚çº§
- â¬œ æœåŠ¡ç«¯éªŒè¯
- â¬œ å®Œæ•´æµ‹è¯•

---

**æ··åˆé™åˆ¶ç³»ç»Ÿå·²å®æ–½å®Œæˆï¼ç«‹å³æµ‹è¯•ï¼** ğŸš€

**æµ‹è¯•åœ°å€**: http://localhost:3000

**éªŒè¯æ–¹æ³•**: 
1. æ¸…é™¤ localStorage
2. è§£ææ¢¦å¢ƒè§‚å¯Ÿè®¡æ•°
3. éªŒè¯æ¯æ—¥å’Œæ¯æœˆé™åˆ¶

---

**å®æ–½æ—¶é—´**: 1.5 å°æ—¶  
**æˆæœ¬èŠ‚çœ**: $4,212/å¹´  
**çŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆ  
**ä¸‹ä¸€æ­¥**: æµ‹è¯•éªŒè¯

